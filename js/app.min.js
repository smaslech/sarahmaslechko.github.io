function rand(a, b) {
    return Math.floor(Math.random() * (b - a + 1)) + a
}
function arrayRand(a) {
    var b = a[Math.floor(Math.random() * a.length)];
    return b
}
function init() {}
var width = $(window).width(), height = $(window).height(), $slider = null, $root, $body, $intro, flkty, caption, flickityFirst = !0, lastCell = !1;
$(function() {
    var a = {
        init: function() {
            $(window).load(function() {
                a.deferImages(),
                $(".loader").fadeOut(300)
            }),
            $(window).resize(function(a) {}),
            $(document).ready(function(b) {
                $root = "/",
                $body = b("body"),
                $intro = b(".intro"),
                $hover = b(".slider.hover .gallery_cell"),
                History.Adapter.bind(window, "statechange", function() {
                    var d = History.getState();
                    console.log(d);
                    var e = d.data;
                    "project" == e.type ? ($intro.remove(),
                    $body.addClass("album loading"),
                    a.loadContent(d.url + "/ajax", c)) : "infos" == e.type ? ($intro.remove(),
                    $body.addClass("infos")) : ($body.removeClass("album infos loading"),
                    $hover.addClass("hidden"),
                    null != $slider && (b(".container .caption").empty(),
                    caption = null,
                    $slider.flickity("destroy").empty().show(),
                    $slider = null,
                    flkty = null))
                }),
                b('[data-target="index"]').bind("click", function(b) {
                    b.preventDefault(),
                    a.goIndex()
                }),
                b(".intro").click(function(a) {
                    b(this).addClass("closed")
                }),
                $body.hasClass("album") && a.loadSlider(),
                b(document).keyup(function(b) {
                    27 === b.keyCode && a.goIndex()
                }),
                b(document).keyup(function(b) {
                    37 === b.keyCode && $slider && a.goPrev($slider)
                }),
                b(document).keyup(function(b) {
                    39 === b.keyCode && $slider && a.goNext($slider)
                }),
                Modernizr.touch ? a.mobileMenu() : a.mouseNav();
                var c = b('.container .slider:not(".hover")');
                b(".main_menu .albums a").hover(function() {
                    var a = b(this).data("target");
                    b('.slider.hover .gallery_cell[data-title="' + a + '"]').removeClass("hidden")
                }, function() {
                    $body.hasClass("loading") || $hover.addClass("hidden")
                })
            })
        },
        mouseNav: function(a) {
            $(window).mousemove(function(a) {
                posX = a.pageX,
                posY = a.pageY,
                $(".mouse_nav").css({
                    top: posY + "px",
                    left: posX + "px"
                })
            })
        },
        mobileMenu: function() {
            $("ul.category .title").click(function(a) {
                var b = $(this).parent();
                b.hasClass("active") || ($("ul.category.active").removeClass("active").find("ul.albums").slideToggle(800),
                b.addClass("active").find("ul.albums").slideToggle(800))
            })
        },
        checkLastCell: function(b) {
            b.selectedIndex < b.cells.length - 1 && (lastCell = !1),
            lastCell && a.goIndex(),
            b.selectedIndex == b.cells.length - 1 && (lastCell = !0)
        },
        loadSlider: function() {
            $slider = $(".slider.albumslider").flickity({
                cellSelector: ".gallery_cell",
                imagesLoaded: !0,
                lazyLoad: 1,
                setGallerySize: !1,
                wrapAround: !1,
                prevNextButtons: !1,
                pageDots: !1
            }),
            flkty = $slider.data("flickity"),
            lastCell = !1,
            a.checkLastCell(flkty),
            flickityFirst && ($slider.on("staticClick.flickity", function(b, c, d, e) {
                d && a.goNext($slider)
            }),
            $slider.on("lazyLoad.flickity", function(b, c) {
                setTimeout(function() {
                    $body.removeClass("loading"),
                    $hover.addClass("hidden"),
                    a.deferImages()
                }, 1e3)
            }),
            $slider.on("select.flickity", function() {
                flkty && (caption = $(".albumslider .gallery_cell").eq(flkty.selectedIndex).data("caption"),
                null != caption ? $(".container .caption").html(caption) : $(".container .caption").empty())
            }),
            $(".prev").bind("click", function(b) {
                b.preventDefault(),
                a.goPrev($slider)
            }),
            $(".next").bind("click", function(b) {
                b.preventDefault(),
                a.goNext($slider)
            }),
            flickityFirst = !1)
        },
        // goIndex: function() {
        //     History.pushState({
        //         type: "index"
        //     }, "Charles Negre", window.location.origin + $root)
        // },
        goNext: function(b) {
            b.flickity("next", !1),
            a.checkLastCell(flkty)
        },
        goPrev: function(b) {
            b.flickity("previous", !1),
            a.checkLastCell(flkty)
        },
        loadContent: function(b, c) {
            $.ajax({
                url: b,
                success: function(b) {
                    $(c).html(b),
                    a.loadSlider()
                }
            })
        },
        deferImages: function() {
            for (var a = document.getElementsByTagName("img"), b = 0; b < a.length; b++)
                a[b].getAttribute("data-src") && a[b].setAttribute("src", a[b].getAttribute("data-src"))
        }
    };
    a.init()
}),
init();
//# sourceMappingURL=app.min.js.map
